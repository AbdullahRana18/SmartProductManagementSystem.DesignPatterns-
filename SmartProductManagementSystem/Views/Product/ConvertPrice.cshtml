@model SmartProductManagementSystem.Models.Product

@{
    ViewData["Title"] = "Currency Converter";
    decimal originalPrice = Convert.ToDecimal(ViewBag.OriginalPrice);
    decimal convertedPrice = Convert.ToDecimal(ViewBag.ConvertedPrice);
    string targetCurrency = ViewBag.Currency ?? "PKR";
}

<div class="container py-3 py-md-5">
    <div class="row justify-content-center">
        <div class="col-11 col-sm-9 col-md-6 col-lg-5">

            <div class="card border-0 shadow-lg rounded-4 overflow-hidden">

                <div class="card-header bg-info-soft text-center py-4 border-0">
                    <div class="icon-circle bg-white shadow-sm mx-auto mb-3 text-info">
                        <i class="bi bi-currency-exchange fs-2"></i>
                    </div>
                    <h4 class="fw-bold text-dark mb-0 responsive-title">Currency Adapter</h4>
                    <p class="text-muted small mb-0 px-2">Real-time Price Conversion using Adapter Pattern</p>
                </div>

                <div class="card-body p-3 p-md-4 bg-white">

                    <div class="text-center mb-4">
                        <h6 class="text-uppercase text-muted small fw-bold ls-1">Product</h6>
                        <h3 class="fw-bold text-dark h4">@ViewBag.ProductName</h3>
                    </div>

                    <form asp-action="ConvertPrice" method="get" class="mb-4">
                        <input type="hidden" name="id" value="@Model.Id" />

                        <label class="form-label small text-muted fw-bold">Select Target Currency</label>
                        <div class="input-group input-group-lg shadow-sm rounded-3 overflow-hidden flex-nowrap">
                            <span class="input-group-text bg-white border-end-0 text-muted d-none d-sm-flex">
                                <i class="bi bi-globe"></i>
                            </span>
                            <select class="form-select border-start-0 ps-3 ps-sm-0 fs-6" name="currency" onchange="this.form.submit()">
                                <!option value="USD" @(targetCurrency == "USD" ? "selected" : "")>USD - US Dollar</!option>
                                <!option value="EUR" @(targetCurrency == "EUR" ? "selected" : "")>EUR - Euro</!option>
                                <!option value="PKR" @(targetCurrency == "PKR" ? "selected" : "")>PKR - Pakistani Rupee</!option>
                            </select>
                            <button class="btn btn-info text-white px-3 px-md-4 fw-bold fs-6">Convert</button>
                        </div>
                    </form>

                    <div class="conversion-result p-3 rounded-3 bg-light border text-center">
                        <div class="row g-0">
                            <div class="col-6 border-end">
                                <small class="text-muted d-block text-uppercase small-label fw-bold">Base (PKR)</small>
                                <span class="fs-5 fw-bold text-dark">@originalPrice.ToString("N0")</span>
                            </div>

                            <div class="col-6">
                                <small class="text-info d-block text-uppercase small-label fw-bold">Target (@targetCurrency)</small>
                                <span class="fs-4 fs-md-3 fw-bold text-info">@convertedPrice.ToString("N2")</span>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-4">
                        <a asp-action="Index" class="btn btn-outline-dark rounded-pill px-4 py-2 fs-6">
                            <i class="bi bi-arrow-left me-2"></i> Back to Products
                        </a>
                    </div>

                </div>
            </div>

        </div>
    </div>
</div>

<style>
    body {
        background-color: #f5f7fa;
    }

    .bg-info-soft {
        background: linear-gradient(180deg, #e0f7fa 0%, #ffffff 100%);
    }

    .text-info {
        color: #00bcd4 !important;
    }

    .btn-info {
        background-color: #00bcd4;
        border-color: #00bcd4;
    }

        .btn-info:hover {
            background-color: #00acc1;
        }

    /* Responsive Title & Labels */
    .responsive-title {
        font-size: 1.25rem;
    }
    @@media (min-width: 768px) {
        .responsive-title {
            font-size: 1.5rem;
        }
    }

    .small-label {
        font-size: 0.7rem;
    }
    @@media (min-width: 768px) {
        .small-label {
            font-size: 0.8rem;
        }
    }

    /* Icon Circle */
    .icon-circle {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* Form Adjustments for Small Screens */
    @@media (max-width: 576px) {
        .input-group-lg > .form-select, .input-group-lg > .btn {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }
    }

    .ls-1 {
        letter-spacing: 1px;
    }
</style>