@model SmartProductManagementSystem.Models.Product

@{
    ViewData["Title"] = "Currency Converter";
    // Formatting values for better display
    decimal originalPrice = Convert.ToDecimal(ViewBag.OriginalPrice);
    decimal convertedPrice = Convert.ToDecimal(ViewBag.ConvertedPrice);
    string targetCurrency = ViewBag.Currency ?? "PKR";
}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-5">

            <div class="card border-0 shadow-lg rounded-4 overflow-hidden">

                <div class="card-header bg-info-soft text-center py-4 border-0">
                    <div class="icon-circle bg-white shadow-sm mx-auto mb-3 text-info">
                        <i class="bi bi-currency-exchange fs-2"></i>
                    </div>
                    <h4 class="fw-bold text-dark mb-0">Currency Adapter</h4>
                    <p class="text-muted small mb-0">Real-time Price Conversion</p>
                </div>

                <div class="card-body p-4 bg-white">

                    <div class="text-center mb-4">
                        <h6 class="text-uppercase text-muted small fw-bold ls-1">Product</h6>
                        <h3 class="fw-bold text-dark">@ViewBag.ProductName</h3>
                    </div>

                    <form asp-action="ConvertPrice" method="get" class="mb-4">
                        <input type="hidden" name="id" value="@Model.Id" />

                        <label class="form-label small text-muted fw-bold">Select Target Currency</label>
                        <div class="input-group input-group-lg shadow-sm rounded-3 overflow-hidden">
                            <span class="input-group-text bg-white border-end-0 text-muted">
                                <i class="bi bi-globe"></i>
                            </span>
                            <select class="form-select border-start-0 ps-0" name="currency" onchange="this.form.submit()">
                                <!option value="USD" @(targetCurrency == "USD" ? "selected" : "")>USD - US Dollar</!option>
                                <!option value="EUR" @(targetCurrency == "EUR" ? "selected" : "")>EUR - Euro</!option>
                                <!option value="PKR" @(targetCurrency == "PKR" ? "selected" : "")>PKR - Pakistani Rupee</!option>
                                @* <!option value="GBP" @(targetCurrency == "GBP" ? "selected" : "")>GBP - British Pound</!option> *@
                            </select>
                            <button class="btn btn-info text-white px-4 fw-bold">Convert</button>
                        </div>
                    </form>

                    <div class="conversion-result p-3 rounded-3 bg-light border text-center">
                        <div class="row">
                            <div class="col-6 border-end">
                                <small class="text-muted d-block text-uppercase small fw-bold">Base (PKR)</small>
                                <span class="fs-5 fw-bold text-dark">@originalPrice.ToString("N0")</span>
                            </div>

                            <div class="col-6">
                                <small class="text-info d-block text-uppercase small fw-bold">Target (@targetCurrency)</small>
                                <span class="fs-4 fw-bold text-info">@convertedPrice.ToString("N2")</span>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-4">
                        <a asp-action="Index" class="btn btn-outline-dark rounded-pill px-4">
                            <i class="bi bi-arrow-left me-2"></i> Back to Products
                        </a>
                    </div>

                </div>
            </div>

        </div>
    </div>
</div>

<style>
    body {
        background-color: #f5f7fa;
    }

    /* Soft Blue Background */
    .bg-info-soft {
        background: linear-gradient(180deg, #e0f7fa 0%, #ffffff 100%);
    }

    .text-info {
        color: #00bcd4 !important; /* Material Design Cyan */
    }

    .btn-info {
        background-color: #00bcd4;
        border-color: #00bcd4;
    }

        .btn-info:hover {
            background-color: #00acc1;
        }

    /* Icon Circle */
    .icon-circle {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* Input Group Styling */
    .input-group-text {
        background: transparent;
    }

    .form-select:focus {
        box-shadow: none;
        border-color: #ced4da;
    }

    .ls-1 {
        letter-spacing: 1px;
    }
</style>